<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加主题</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script type="text/javascript">
        $("#put_form").ready(function () {
            var url_str = window.location.href;
            var p_id = url_str.split("=")[1];
            $("#put_form").append(
                 '<div class="form-group"><label for="inputtext" class="col-sm-2 control-label">mediacode</label><div class="col-sm-10"><input name="p_id" readonly="readonly" type="text" class="form-control" id="inputaccount" value="'+ p_id +'"></div></div>' +
                 '<div class="form-group"><label for="inputtext" class="col-sm-2 control-label">主题名字</label><div class="col-sm-10"><input name="t_name" type="text" class="form-control" id="t_name"></div></div>' +
                 '<div class="form-group">\n' +
                 '                    <div class="col-sm-offset-2 col-sm-10">\n' +
                 '                        <button type="submit" class="btn btn-success">提交</button>\n' +
                 '                    </div>\n' +
                 '                    <div class="col-sm-offset-2 col-sm-10">\n' +
                 '                        <button type="submit" class="btn btn-primary">创建新主题</button>\n' +
                 '                    </div>\n' +
                 '                </div>'
            );

            $(".btn-success").click(function () {
                $.ajax({
                    type: "post",
                    url: "/project1/api/mediaspag_themes/",
                    async: true,
                    data: $("#put_form").serialize(),
                    result: {},
                    success: function (result) {
                        alert('添加成功！');
                        window.close();
                    },
                    error: function (result) {

                        alert(result["responseJSON"]["msg"]);
                    }
                });
            });
            $(".btn-primary").click(function () {
                window.close();
                var url = '/project1/new_theme_add/';
                var left = (window.screen.width - 600) / 2;
                var top = (window.screen.height - 400) / 2;
                window.open(url, "", "height=" + 400 + ", width=" + 600 + ",top=" + top + ",left=" + left + ", toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no");
            });
        })

    </script>
</head>
<body>
<div class="content-wrap">
    <div class="main">
        <div class="container-fluid">
            <form class="form-horizontal" id="put_form" onclick="return false">

{#                <div class="form-group">#}
{#                    <div class="col-sm-offset-2 col-sm-10">#}
{#                        <button type="submit" class="btn btn-success">提交</button>#}
{#                    </div>#}
{#                    <div class="col-sm-offset-2 col-sm-10">#}
{#                        <button type="submit" class="btn btn-primary">创建新主题</button>#}
{#                    </div>#}
{#                </div>#}
            </form>
        </div>
    </div>
</div>
<script type="text/javascript">


</script>
</body>
</html>